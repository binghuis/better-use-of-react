# React 中的 TypeScript

## 集成 TypeScript

`React` 项目中的 `TypeScript` 类型是由 `@types/react` 和 `@types/react-dom` 这两个包提供的。

安装相关开发依赖包获取 TypeScript 类型支持。

```shell
pnpm i -D @types/react @types/react-dom
```

`JSX` 语法天然支持 `TypeScript`，因此在 `React` 项目中使用 `TypeScript` 时，只需将 `React` 组件文件后缀改为 `.tsx`。

如果你是在现有项目上手动配置 `TypeScript`，不要忘记在 `tsconfig.json` 中配置 `jsx` 和 `lib` 选项。

```json
{
  "compilerOptions": {
    "jsx": "preserve",
    "lib": ["ESNext", "DOM"]
  }
}
```

有很多人对 `tsconfig.json` 文件的配置不是很熟悉，但是在本章节 `tsconfig.json` 的配置不是重点。
我们只介绍 `jsx` 和 `lib` 选项，其他选项的配置可以参考 [TypeScript 官方文档](https://www.typescriptlang.org/zh/tsconfig)。

**`lib`：指定了要引入的声明文件。**

`ESNext`：代表最新版 `ECMAScript` 的类型定义。

`DOM`：代表浏览器 `DOM` 相关的类型定义。

**`jsx`：控制 `.tsx` 文件的编译输出结果。** 注意输出结果是不包含 `TypeScript` 类型的。`TypeScript` 类型会单独生成 `*.d.ts` 声明文件。

`preserve`：代表输出 `.jsx` 文件，保留 `JSX` 语法。后续代码交给 `babel` 处理。

`react-jsx`：代表输出 `.js` 文件，`JSX` 语法转换成 `_jsx` 函数，适用 `React 17` 及以上版本。

`react`：代表输出 `.js` 文件，`JSX` 语法转换成 `React.createElement` 函数，适用 `React 17` 以下版本。

[`jsx` 不同的生成结果点击这里测试。](https://www.typescriptlang.org/zh/play?noImplicitAny=false&jsx=1&pretty=true&filetype=ts#code/JYOwLgpgTgZghgYwgAgEIFcxgPYgApTYAOAzsgN4BQyyuAwgDbAIDWAXMgBQCUyAvAD5kAN2zAAJgG5qyBAAtgDcVAggOAUQYQAtqrCUAvpUoJcJMGkw4Q-LuVohGzFgBpZCpSpsGOGLLgJiEl5BChkVMHQoG04ZGgAeACMrXAcnVj5yeiZWAwE4mgp5RWVVI0LkeIB6ZP8QfJpuaQNpIA)

## React 内置类型

[@types/react 类型文件](https://github.com/DefinitelyTyped/DefinitelyTyped/blob/master/types/react/index.d.ts)
